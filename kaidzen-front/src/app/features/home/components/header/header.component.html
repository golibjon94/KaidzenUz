<header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 border-b border-gray-100">
  <nav class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
    <a href="/">
      <div class="flex items-center gap-2">
        <div class="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center">
          <span class="text-white font-bold text-xl">K</span>
        </div>
        <span class="text-2xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent">
        Kaidzen
      </span>
      </div>

    </a>

    <div class="hidden md:flex items-center gap-8">
      <a href="#services" class="text-gray-600 hover:text-blue-600 font-medium transition-colors">Xizmatlar</a>
      <a href="#about" class="text-gray-600 hover:text-blue-600 font-medium transition-colors">Biz haqimizda</a>
      <a href="#blog" class="text-gray-600 hover:text-blue-600 font-medium transition-colors">Blog</a>
      <a href="#cases" class="text-gray-600 hover:text-blue-600 font-medium transition-colors">Keyslar</a>
    </div>

    <div class="flex items-center gap-4">
      @if (authStore.isAuthenticated()) {
        <div class="flex items-center gap-3">
          <button nz-button nzType="text" class="font-medium flex items-center gap-2" (click)="goToProfile()">
            <span nz-icon nzType="user"></span>
            {{ authStore.user()?.fullName }}
          </button>
          <button nz-button nzType="text" nzDanger (click)="logout()" title="Chiqish">
            <span nz-icon nzType="logout"></span>
          </button>
        </div>
      } @else {
        <button nz-button nzType="text" class="font-medium" (click)="showLoginModal()">Kirish</button>
        <button nz-button nzType="primary" class="rounded-full px-6" (click)="goToTests()">Boshlash</button>
      }
    </div>
  </nav>
</header>

<!-- Login Modal -->
<nz-modal
  [(nzVisible)]="isLoginModalVisible"
  nzTitle="Tizimga kirish"
  [nzFooter]="null"
  (nzOnCancel)="handleLoginCancel()"
  nzWidth="400px"
>
  <ng-container *nzModalContent>
    <form nz-form [formGroup]="loginForm" (ngSubmit)="handleLogin()">
      <nz-form-item>
        <nz-form-label [nzSpan]="24" nzRequired>Telefon raqam</nz-form-label>
        <nz-form-control [nzSpan]="24" [nzErrorTip]="phoneError">
          <nz-input-group nzAddOnBefore="+998">
            <input
              nz-input
              formControlName="phone"
              placeholder="90 123 45 67"
              type="tel"
              maxlength="9"
            />
          </nz-input-group>
          <ng-template #phoneError>
            @if (loginForm.get('phone')?.errors?.['required']) {
              Telefon raqamni kiriting
            } @else if (loginForm.get('phone')?.errors?.['pattern']) {
              9 ta raqam kiriting (masalan: 901234567)
            }
          </ng-template>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSpan]="24" nzRequired>Parol</nz-form-label>
        <nz-form-control [nzSpan]="24" nzErrorTip="Parolni kiriting (kamida 6 ta belgi)">
          <input
            nz-input
            formControlName="password"
            placeholder="Parolingizni kiriting"
            type="password"
          />
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-control [nzSpan]="24">
          <button
            nz-button
            nzType="primary"
            nzBlock
            [nzLoading]="isLoading()"
            type="submit"
            class="h-10"
          >
            Kirish
          </button>
        </nz-form-control>
      </nz-form-item>

      <div class="text-center mt-4">
        <span class="text-gray-600">Akkauntingiz yo'qmi? </span>
        <button
          nz-button
          nzType="link"
          (click)="goToRegister()"
          type="button"
          class="p-0"
        >
          Ro'yxatdan o'tish
        </button>
      </div>
    </form>
  </ng-container>
</nz-modal>
