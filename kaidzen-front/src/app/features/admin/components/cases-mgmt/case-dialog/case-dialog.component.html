<div class="dialog-wrapper">
  <div class="dialog-header">
    <mat-icon class="header-icon">work_outline</mat-icon>
    <div>
      <h2 class="dialog-title">Yangi biznes keys</h2>
      <p class="dialog-subtitle">Keysning barcha ma'lumotlarini kiriting</p>
    </div>
  </div>

  <mat-dialog-content>
    <form [formGroup]="caseForm" class="form-grid">

      <!-- Sales Network - full width -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Savdo tarmog'i</mat-label>
        <mat-select formControlName="salesNetworkId">
          <mat-option *ngFor="let sn of salesNetworks()" [value]="sn.id">
            {{ sn.name }}
          </mat-option>
        </mat-select>
        <mat-icon matPrefix>store</mat-icon>
        <mat-error *ngIf="caseForm.get('salesNetworkId')?.hasError('required')">
          Savdo tarmog'ini tanlang
        </mat-error>
      </mat-form-field>

      <!-- Problem -->
      <mat-form-field appearance="outline">
        <mat-label>Muammo</mat-label>
        <textarea matInput formControlName="problem" rows="4"
                  placeholder="Muammo nima edi?"></textarea>
        <mat-error *ngIf="caseForm.get('problem')?.hasError('required')">
          Muammoni kiriting
        </mat-error>
      </mat-form-field>

      <!-- Solution -->
      <mat-form-field appearance="outline">
        <mat-label>Yechim</mat-label>
        <textarea matInput formControlName="solution" rows="4"
                  placeholder="Qanday yechim taklif qilindi?"></textarea>
        <mat-error *ngIf="caseForm.get('solution')?.hasError('required')">
          Yechimni kiriting
        </mat-error>
      </mat-form-field>

      <!-- Result (FULL WIDTH) -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Natija</mat-label>
        <textarea
          matInput
          formControlName="result"
          rows="4"
          placeholder="Qanday natija olindi?"
        ></textarea>
        <mat-error *ngIf="caseForm.get('result')?.hasError('required')">
          Natijani kiriting
        </mat-error>
      </mat-form-field>

      <!-- Dates row (bottom, side-by-side) -->
      <div class="date-row">
        <mat-form-field appearance="outline">
          <mat-label>Dan</mat-label>
          <input matInput [matDatepicker]="pickerFrom" formControlName="dateFrom"/>
          <mat-datepicker-toggle matSuffix [for]="pickerFrom"></mat-datepicker-toggle>
          <mat-datepicker #pickerFrom></mat-datepicker>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Gacha</mat-label>
          <input matInput [matDatepicker]="pickerTo" formControlName="dateTo"/>
          <mat-datepicker-toggle matSuffix [for]="pickerTo"></mat-datepicker-toggle>
          <mat-datepicker #pickerTo></mat-datepicker>
        </mat-form-field>
      </div>
    </form>
  </mat-dialog-content>

  <mat-dialog-actions align="end">
    <button mat-button (click)="onCancel()">Bekor qilish</button>
    <button mat-flat-button color="primary" (click)="onSubmit()">
      <mat-icon>save</mat-icon>
      Saqlash
    </button>
  </mat-dialog-actions>
</div>
